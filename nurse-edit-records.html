<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Records</title>
    <link rel="stylesheet" href="records.css">
    <link rel="icon" type="image/x-icon" href="logo_notext.png">
</head>
<body>
    <nav class="navbar">
        
        <div class="nav-logo">
            <img src="logo.png" alt="DocuMed Logo">
        </div>
        <div class="nav-links">
            <!-- Notification Icon -->
            <a href="#" class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
                    <path d="M5 19C4.71667 19 4.47934 18.904 4.288 18.712C4.09667 18.52 4.00067 18.2827 4 18C3.99934 17.7173 4.09534 17.48 4.288 17.288C4.48067 17.096 4.718 17 5 17H6V10C6 8.61667 6.41667 7.38767 7.25 6.313C8.08334 5.23834 9.16667 4.534 10.5 4.2V3.5C10.5 3.08334 10.646 2.72934 10.938 2.438C11.23 2.14667 11.584 2.00067 12 2C12.416 1.99934 12.7703 2.14534 13.063 2.438C13.3557 2.73067 13.5013 3.08467 13.5 3.5V4.2C14.8333 4.53334 15.9167 5.23767 16.75 6.313C17.5833 7.38834 18 8.61734 18 10V17H19C19.2833 17 19.521 17.096 19.713 17.288C19.905 17.48 20.0007 17.7173 20 18C19.9993 18.2827 19.9033 18.5203 19.712 18.713C19.5207 18.9057 19.2833 19.0013 19 19H5ZM12 22C11.45 22 10.9793 21.8043 10.588 21.413C10.1967 21.0217 10.0007 20.5507 10 20H14C14 20.55 13.8043 21.021 13.413 21.413C13.0217 21.805 12.5507 22.0007 12 22Z" fill="#B1B1B1"/>
                    </svg>
            </a>

            <!-- User Icon and Profile Name -->
            <div class="profile-container">
                <div class="profile">
                    <div class="user-icon">
                        <img src="nurse_profile.png" alt="Nurse Profile">
                    </div>
                    <div class="profile-name">
                        <h3>Sarah Kim</h3>
                        <p>Nurse</p>
                    </div>
                </div>

                <!-- Dropdown for Logout -->
                <div class="dropdown">
                    <button class="dropdown-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M6 7L12 13L18 7L20 9L12 17L4 9L6 7Z" fill="black"/>
                        </svg>
                    </button>
                    <div class="dropdown-menu">
                        <a href="nurse-profile.html" class="dropdown-item">My Profile</a>
                        <a href="nurse-login.html" class="dropdown-item">Log out</a>
                    </div>
                </div>
            </div>
            
        </div>
    </nav>


    <nav class="menu" tabindex="0">
        <div class="smartphone-menu-trigger"></div>
        <header class="avatar">
            <img src="nurse_profile.png" />
            <h2>Sarah Kim</h2>
        </header>
        <ul>
            <li tabindex="0" class="icon-dashboard">
                <img src="home-icon.png" alt="Home Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="nurse-dashboard.html"><span>Home</span></a>
            </li>
            <li tabindex="0" class="icon-customers">
                <img src="records-icon.png" alt="Records Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="nurse-records.html"><span>Records</span></a>
            </li>
            <li tabindex="0" class="icon-users">
                <img src="appointment-icon.png" alt="Appointment Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="nurse-appointment.html"><span>Appointment</span></a>
            </li>
            <li tabindex="0" class="icon-users">
                <img src="inventory-icon.png" alt="Inventory Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="nurse-inventory.html"><span>Inventory</span></a>
            </li>
            <!-- <li tabindex="0" class="icon-settings">
                <img src="doctor_profile.png" alt="Logout Icon" style="width:20px; height:20px; margin-right:10px;">
                <span>Log out</span>
            </li> -->
        </ul>
    </nav>
</body>

    <div class="main">
        <div class="profile-content">
            <div class="record-header">
                <div class="back-button">
                    <a href="nurse-records.html">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="36" viewBox="0 0 18 36" fill="none" style="margin: 7px; cursor: pointer;">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M5.01472 18L15.6212 28.6065L13.5002 30.7275L1.83322 19.0605C1.55202 18.7792 1.39404 18.3977 1.39404 18C1.39404 17.6022 1.55202 17.2208 1.83322 16.9395L13.5002 5.27249L15.6212 7.39349L5.01472 18Z" fill="#757575"/>
                        </svg>
                    </a>
                </div>
                <div class="profile-header">
                    <div class="student-info">
                        <h1>Health Record</h1>
                    </div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab-btn active" onclick="openTab(event, 'general')">General</button>
                <button class="tab-btn" onclick="openTab(event, 'medical')">Medical History</button>
                <button class="tab-btn" onclick="openTab(event, 'visits')">Visit History</button>
            </div>

            <form id="healthRecordForm">
                <!-- General Tab -->
                <div id="general" class="tab-content active">
                    <!-- Basic Information Section -->
                    <div class="section">
                        <h2>Basic Information</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">First Name</label>
                                <input type="text" id="firstName" name="firstName" required>
                            </div>
                            <div class="form-group">
                                <label for="middleName">Middle Name</label>
                                <input type="text" id="middleName" name="middleName">
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name</label>
                                <input type="text" id="lastName" name="lastName" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="sex">Sex</label>
                                <select id="sex" name="sex" required>
                                    <option value="">Select</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="age">Age</label>
                                <input type="number" id="age" name="age" required>
                            </div>
                            <div class="form-group">
                                <label for="birthdate">Birthdate</label>
                                <input type="date" id="birthdate" name="birthdate" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <!-- <div class="form-group">
                                <label for="course">Course</label>
                                <select id="course" name="course" required>
                                    <option value="">Select Course</option>
                                    <option value="BSCS">BSCS</option>
                                    <option value="BSIT">BSIT</option>
                                    <option value="BSED">BSED</option>
                                </select>
                            </div> -->
                            <div class="form-group">
                                <label for="course">Course</label>
                                <input type="text" id="course" name="course" value="" required>
                            </div>
                            <div class="form-group">
                                <label for="studentNumber">Student Number</label>
                                <input type="text" id="studentNumber" name="studentNumber" value="" required>
                            </div>
                            <div class="form-group">
                                <label for="civilStatus">Civil Status</label>
                                <select id="civilStatus" name="civilStatus" required>
                                    <option value="">Select</option>
                                    <option value="single">Single</option>
                                    <option value="married">Married</option>
                                    <option value="widowed">Widowed</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="nationality">Nationality</label>
                                <input type="text" id="nationality" name="nationality" required>
                            </div>
                            <div class="form-group">
                                <label for="religion">Religion</label>
                                <input type="text" id="religion" name="religion">
                            </div>
                        </div>
                    </div>

                    <!-- Contact Information Section -->
                    <div class="section">
                        <h2>Contact Information</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" name="address" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="barangay">Barangay</label>
                                <input type="text" id="barangay" name="barangay" required>
                            </div>
                            <div class="form-group">
                                <label for="cityProvince">City/Province</label>
                                <input type="text" id="cityProvince" name="cityProvince" required>
                            </div>
                        </div>

                        <div class="emergency-contact">
                            <h3>Emergency Contact</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="emergencyContact">Person to be notified in case of emergency</label>
                                    <input type="text" id="emergencyContact" name="emergencyContact" required>
                                </div>
                                <div class="form-group">
                                    <label for="relation">Relation</label>
                                    <input type="text" id="relation" name="relation" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="emergencyPhone">Telephone Number of Contact Person</label>
                                <input type="tel" id="emergencyPhone" name="emergencyPhone" required>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Medical History Tab -->
                <div id="medical" class="tab-content">
                    <div class="section">
                        <h2>Physical Examination</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="height">Height (cm)</label>
                                <input type="number" id="height" name="height" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="weight">Weight (kg)</label>
                                <input type="number" id="weight" name="weight" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="bmi">BMI</label>
                                <input type="number" id="bmi" name="bmi" step="0.01" readonly>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="bloodType">Blood Type</label>
                                <select id="bloodType" name="bloodType" required>
                                    <option value="">Select</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="bloodPressure">Blood Pressure</label>
                                <input type="text" id="bloodPressure" name="bloodPressure" placeholder="120/80" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="rightVision">Right Vision</label>
                                <input type="text" id="rightVision" name="rightVision" required>
                            </div>
                            <div class="form-group">
                                <label for="leftVision">Left Vision</label>
                                <input type="text" id="leftVision" name="leftVision" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="allergies">Allergies</label>
                            <textarea id="allergies" name="allergies" rows="3"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="medications">Current Medications</label>
                            <textarea id="medications" name="medications" rows="3"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="vaccines">Vaccines</label>
                            <textarea id="vaccines" name="vaccines" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Visit History Tab -->
                <div id="visits" class="tab-content">
                    <div class="section">
                        <h2>Visit History</h2>
                        <table class="visit-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Complaint</th>
                                    <th>Diagnosis</th>
                                    <th>Treatment</th>
                                    <th>Attended By</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Visit records will be dynamically added here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="editBtn" class="btn-edit">
                        <i class="fas fa-edit"></i> Edit Record
                    </button>
                    <button type="submit" id="saveBtn" class="btn-save" style="display: none;">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                    <button type="button" id="cancelBtn" class="btn-cancel" style="display: none;">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>


    <script>
        function openTab(evt, tabName) {
            // Hide all tab content
            var tabContents = document.getElementsByClassName("tab-content");
            for (var i = 0; i < tabContents.length; i++) {
                tabContents[i].style.display = "none";
            }

            // Remove active class from all tab buttons
            var tabButtons = document.getElementsByClassName("tab-btn");
            for (var i = 0; i < tabButtons.length; i++) {
                tabButtons[i].className = tabButtons[i].className.replace(" active", "");
            }

            // Show the selected tab content and mark the button as active
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // Calculate BMI when height or weight changes
        document.getElementById('height').addEventListener('input', calculateBMI);
        document.getElementById('weight').addEventListener('input', calculateBMI);

        function calculateBMI() {
            const height = document.getElementById('height').value / 100; // Convert cm to m
            const weight = document.getElementById('weight').value;
            
            if (height && weight) {
                const bmi = weight / (height * height);
                document.getElementById('bmi').value = bmi.toFixed(2);
            }
        }

        // Show the general tab by default
        document.getElementById('general').style.display = "block";

        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('healthRecordForm');
            const editBtn = document.getElementById('editBtn');
            const saveBtn = document.getElementById('saveBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const allInputs = form.querySelectorAll('input, select, textarea');
            
            // Store original values
            const originalValues = new Map();
            
            // Initially disable all inputs
            allInputs.forEach(input => {
                input.disabled = true;
                originalValues.set(input.id, input.value);
            });

            // Edit button click handler
            editBtn.addEventListener('click', () => {
                // Enable all inputs
                allInputs.forEach(input => {
                    input.disabled = false;
                    input.classList.add('editing');
                });
                
                // Show/hide buttons
                editBtn.style.display = 'none';
                saveBtn.style.display = 'inline-block';
                cancelBtn.style.display = 'inline-block';
                
                // Add editing class to form
                form.classList.add('form-editing');
            });

            // Cancel button click handler
            cancelBtn.addEventListener('click', () => {
                // Restore original values
                allInputs.forEach(input => {
                    input.value = originalValues.get(input.id);
                    input.disabled = true;
                    input.classList.remove('editing');
                });
                
                // Reset buttons
                editBtn.style.display = 'inline-block';
                saveBtn.style.display = 'none';
                cancelBtn.style.display = 'none';
                
                // Remove editing class
                form.classList.remove('form-editing');
            });

            // Form submission handler
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                try {
                    // Here you would typically send the data to your backend
                    // await updateHealthRecord(formData);
                    
                    // Update original values
                    allInputs.forEach(input => {
                        originalValues.set(input.id, input.value);
                        input.disabled = true;
                        input.classList.remove('editing');
                    });
                    
                    // Reset buttons
                    editBtn.style.display = 'inline-block';
                    saveBtn.style.display = 'none';
                    cancelBtn.style.display = 'none';
                    
                    // Remove editing class
                    form.classList.remove('form-editing');
                    
                    // Show success message
                    showNotification('Record updated successfully!', 'success');
                } catch (error) {
                    showNotification('Failed to update record', 'error');
                }
            });
        });

        // Add this helper function for notifications
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>


</html>