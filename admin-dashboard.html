<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="icon" type="image/x-icon" href="logo_notext.png">
</head>
<body>
    <nav class="navbar">
        
        <div class="nav-logo">
            <img src="logo.png" alt="DocuMed Logo">
        </div>
        <div class="nav-links">
            <!-- Notification Icon -->
            <a href="#" class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
                    <path d="M5 19C4.71667 19 4.47934 18.904 4.288 18.712C4.09667 18.52 4.00067 18.2827 4 18C3.99934 17.7173 4.09534 17.48 4.288 17.288C4.48067 17.096 4.718 17 5 17H6V10C6 8.61667 6.41667 7.38767 7.25 6.313C8.08334 5.23834 9.16667 4.534 10.5 4.2V3.5C10.5 3.08334 10.646 2.72934 10.938 2.438C11.23 2.14667 11.584 2.00067 12 2C12.416 1.99934 12.7703 2.14534 13.063 2.438C13.3557 2.73067 13.5013 3.08467 13.5 3.5V4.2C14.8333 4.53334 15.9167 5.23767 16.75 6.313C17.5833 7.38834 18 8.61734 18 10V17H19C19.2833 17 19.521 17.096 19.713 17.288C19.905 17.48 20.0007 17.7173 20 18C19.9993 18.2827 19.9033 18.5203 19.712 18.713C19.5207 18.9057 19.2833 19.0013 19 19H5ZM12 22C11.45 22 10.9793 21.8043 10.588 21.413C10.1967 21.0217 10.0007 20.5507 10 20H14C14 20.55 13.8043 21.021 13.413 21.413C13.0217 21.805 12.5507 22.0007 12 22Z" fill="#B1B1B1"/>
                    </svg>
            </a>

            <!-- User Icon and Profile Name -->
            <div class="profile-container">
                <div class="profile">
                    <div class="user-icon">
                        <img src="admin_profile.png" alt="Admin Profile">
                    </div>
                    <div class="profile-name">
                        <h3>Juan Dela Cruz</h3>
                        <p>Admin</p>
                    </div>
                </div>

                <!-- Dropdown for Logout -->
                <div class="dropdown">
                    <button class="dropdown-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M6 7L12 13L18 7L20 9L12 17L4 9L6 7Z" fill="black"/>
                        </svg>
                    </button>
                    <div class="dropdown-menu">
                        <a href="student-profile.html" class="dropdown-item">My Profile</a>
                        <a href="student-login.html" class="dropdown-item">Log out</a>
                    </div>
                </div>
            </div>
            
        </div>
    </nav>


    <nav class="menu" tabindex="0">
        <div class="smartphone-menu-trigger"></div>
        <header class="avatar">
            <img src="admin_profile.png" />
            <h2>Juan Dela Cruz</h2>
        </header>
        <ul>
            <li tabindex="0" class="icon-dashboard">
                <img src="home-icon.png" alt="Home Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="admin-dashboard.html"><span>Home</span></a>
            </li>
            <li tabindex="0" class="icon-customers">
                <img src="records-icon.png" alt="Records Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="admin-records.html"><span>Records</span></a>
            </li>
            <li tabindex="0" class="icon-users">
                <img src="appointment-icon.png" alt="Appointment Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="admin-appointment.html"><span>Appointment</span></a>
            </li>
            <li tabindex="0" class="icon-users">
                <img src="inventory-icon.png" alt="Inventory Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="admin-inventory.html"><span>Request</span></a>
            </li>
            <!-- <li tabindex="0" class="icon-settings">
                <img src="doctor_profile.png" alt="Logout Icon" style="width:20px; height:20px; margin-right:10px;">
                <span>Log out</span>
            </li> -->
        </ul>
    </nav>


    <div class="main">  
        <div class="dashboard-content">
            <div class="banner">
                <p><script>document.write(new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }));</script></p>
                <h1>Hello, Juan!</h1>
                <img src="student-banner.png" alt="Banner" >
            </div>
            <div class="patient-statistics">
                <h2>Statistics</h2>
                <p> chart ng total # of people sa database (ilan students, nurses, doctors)</p>
            </div>
            <div class="content">
                    <!-- User Accounts Section -->
    <div class="section-header">
        <h2>User Accounts</h2>
        <button class="add-button" onclick="openAddUserModal()">
            Add User
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 3.33334V12.6667" stroke="white" stroke-width="2" stroke-linecap="round"/>
                <path d="M12.6667 8L3.33333 8" stroke="white" stroke-width="2" stroke-linecap="round"/>
            </svg>
        </button>
    </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role</th>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2021-00001</td>
                                <td>Maloi Ricalde</td>
                                <td>Student</td>
                                <td>maloi.ricalde@student.edu</td>
                                <td>
                                    <select onchange="changeUserStatus('2021-00001', this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="table-actions">
                                        <button class="action-btn edit" onclick="editUser('2021-00001')">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </button>
                                        <button class="action-btn delete" onclick="deleteUser('2021-00001')">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>NRS-2024-001</td>
                                <td>Sarah Johnson</td>
                                <td>Nurse</td>
                                <td>sarah.johnson@clinic.edu</td>
                                <td>
                                    <select onchange="changeUserStatus('NRS-2024-001', this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="table-actions">
                                        <button class="action-btn edit" onclick="editUser('NRS-2024-001')">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </button>
                                        <button class="action-btn delete" onclick="deleteUser('NRS-2024-001')">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>DOC-2024-001</td>
                                <td>Dr. Michael Lee</td>
                                <td>Doctor</td>
                                <td>michael.lee@clinic.edu</td>
                                <td>
                                    <select onchange="changeUserStatus('DOC-2024-001', this.value)">
                                        <option value="active" selected>Active</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="table-actions">
                                        <button class="action-btn edit" onclick="editUser('DOC-2024-001')">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </button>
                                        <button class="action-btn delete" onclick="deleteUser('DOC-2024-001')">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="dashboard-sidebar">
            <div class="appointment-list">
                <div class="header-container">
                    <h2>Appointments</h2>
                    <a href="admin-appointment.html" class="view-all-button">View all</a>
                </div>
                <div class="calendar-widget">
                    <h3>Week View</h3>
                    <div class="week-calendar">
                        <div class="calendar-header">
                            <div>Mon</div>
                            <div>Tue</div>
                            <div>Wed</div>
                            <div>Thu</div>
                            <div>Fri</div>
                            <div>Sat</div>
                            <div>Sun</div>
                        </div>
                        <div class="calendar-body" id="calendar-body">
                            <!-- Days will be populated by JavaScript -->
                        </div>
                    </div>

                <div class="daily-tasks">
                    <h3>Today's Schedule</h3>
                    <ul class="task-list" id="task-list">
                        <!-- Tasks will be populated by JavaScript -->
                    </ul>
                </div>
            </div>
                <script>
                    // Sample appointments data - in real app this would come from backend
                    const appointments = {
                        '2024-11-25': [
                            { time: '09:00', patient: 'Sarah Johnson', type: 'Annual checkup' },
                            { time: '11:30', patient: 'Mike Peters', type: 'Follow-up' }
                        ],
                        '2024-11-28': [
                            { time: '10:00', patient: 'John Doe', type: 'Consultation' },
                            { time: '14:15', patient: 'Tommy Smith', type: 'Vaccination' }
                        ],
                        '2024-11-29': [
                            { time: '13:00', patient: 'Emily Brown', type: 'Initial Visit' },
                            { time: '16:30', patient: 'Alice Cooper', type: 'Follow-up' }
                        ]
                    };

                    function getWeekDates(date) {
                        const curr = date || new Date();
                        const week = [];
                        
                        // Starting from Monday
                        curr.setDate(curr.getDate() - curr.getDay() + 1);
                        
                        for (let i = 0; i < 7; i++) {
                            week.push(new Date(curr));
                            curr.setDate(curr.getDate() + 1);
                        }
                        
                        return week;
                    }

                    function formatDate(date) {
                        return date.toISOString().split('T')[0];
                    }

                    function updateCalendar() {
                        const calendarBody = document.getElementById('calendar-body');
                        calendarBody.innerHTML = '';
                        
                        const today = new Date();
                        const weekDates = getWeekDates(today);
                        
                        weekDates.forEach(date => {
                            const dayDiv = document.createElement('div');
                            dayDiv.className = 'calendar-day';
                            if (date.getDate() === today.getDate() && 
                                date.getMonth() === today.getMonth() && 
                                date.getFullYear() === today.getFullYear()) {
                                dayDiv.classList.add('active');
                            }
                            
                            dayDiv.textContent = date.getDate();
                            dayDiv.setAttribute('data-date', formatDate(date));
                            
                            dayDiv.addEventListener('click', () => showAppointments(formatDate(date)));
                            
                            calendarBody.appendChild(dayDiv);
                        });

                        // Show today's appointments by default
                        showAppointments(formatDate(today));
                    }

                    function showAppointments(dateStr) {
                        const taskList = document.getElementById('task-list');
                        taskList.innerHTML = '';
                        
                        // Update active state in calendar
                        document.querySelectorAll('.calendar-day').forEach(day => {
                            day.classList.remove('active');
                            if (day.getAttribute('data-date') === dateStr) {
                                day.classList.add('active');
                            }
                        });

                        const dayAppointments = appointments[dateStr] || [];
                        
                        if (dayAppointments.length === 0) {
                            const li = document.createElement('li');
                            li.innerHTML = '<span class="task">No appointments scheduled</span>';
                            taskList.appendChild(li);
                            return;
                        }

                        dayAppointments.forEach(apt => {
                            const li = document.createElement('li');
                            li.innerHTML = `
                                <span class="time">${apt.time}</span>
                                <span class="task">${apt.type} - ${apt.patient}</span>
                            `;
                            taskList.appendChild(li);
                        });
                    }

                    // Initialize calendar when page loads
                    document.addEventListener('DOMContentLoaded', updateCalendar);
                </script>

            </div>

            <div class="student-inventory-list">
                <div class="section-header">
                    <h2>Pending Requests</h2>
                    <a href="admin-inventory.html" class="view-all">View All</a>
                </div>
                <div class="student-request-container" id="requestsContainer">
                    <!-- Request cards will be loaded here -->
                </div>
            </div>
        </div>
    </div>
    <script>
        function editRecord(button) {
            const row = button.parentNode.parentNode;
            const cells = row.getElementsByTagName('td');
            const name = cells[0].innerText;
            const age = cells[1].innerText;
            const diagnosis = cells[2].innerText;
            const notes = cells[3].innerText;
            // Implement edit functionality here
            alert(`Editing record for ${name}`);
        }

        function addNote(button) {
            const row = button.parentNode.parentNode;
            const cells = row.getElementsByTagName('td');
            const name = cells[0].innerText;
            // Implement add note functionality here
            alert(`Adding note for ${name}`);
        }
    </script>
    <script>
    // Function to load appointments
    function loadAppointments() {
        const appointmentsGrid = document.getElementById('appointmentsGrid');
        
        // Dummy data for testing - Student appointments
        const appointments = [
            {
                id: 1,
                student_name: "Maloi Ricalde",
                student_id: "2021-00123",
                clinic: "East Clinic",
                appointment_date: "2024-03-25",
                appointment_time: "09:00",
                type_of_visit: "Medical Certificate Request",
                status: "Pending",
                reason: "Need medical certificate for PE class"
            },
            {
                id: 2,
                student_name: "Maloi Ricalde",
                student_id: "2021-00123",
                clinic: "West Clinic",
                appointment_date: "2024-03-28",
                appointment_time: "10:00",
                type_of_visit: "Consultation",
                status: "Confirmed",
                reason: "Check-up"
            }
        ];

        // Populate the appointments grid with data
        appointments.forEach(appointment => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${appointment.id}</td>
                <td>${appointment.student_name}</td>
                <td>${appointment.student_id}</td>
                <td>${appointment.clinic}</td>
                <td>${appointment.appointment_date}</td>
                <td>${appointment.appointment_time}</td>
                <td>${appointment.type_of_visit}</td>
                <td>${appointment.status}</td>
                <td>${appointment.reason}</td>
            `;
            appointmentsGrid.appendChild(row);
        });
    }

    // Call the function to load appointments when the page loads
    document.addEventListener('DOMContentLoaded', loadAppointments);
    </script>
    <script>
    function loadRequests() {
        const requestsContainer = document.getElementById('requestsContainer');
        
        // Dummy data for testing - Combined requests (appointments and borrowing)
        const requests = [
            {
                id: 1,
                type: "Appointment",
                date: "2024-03-25",
                time: "09:00",
                status: "Pending",
                details: "Medical Certificate Request",
                notes: "Need medical certificate for PE class",
                created_at: "2024-03-20"
            },
            {
                id: 2,
                type: "Borrow",
                item: "Thermometer",
                quantity: 1,
                status: "Pending",
                return_date: "2024-03-26",
                notes: "For monitoring temperature",
                created_at: "2024-03-21"
            },
            {
                id: 3,
                type: "Borrow",
                item: "First Aid Kit",
                quantity: 1,
                status: "Approved",
                return_date: "2024-03-27",
                notes: "For sports event",
                created_at: "2024-03-19"
            }
        ];

        requestsContainer.innerHTML = requests.map(request => `
            <div class="student-request-card ${request.status.toLowerCase()}">
                <div class="student-request-header">
                    <span class="student-request-type ${request.type.toLowerCase()}">${request.type}</span>
                    <span class="status-badge ${request.status.toLowerCase()}">${request.status}</span>
                </div>
                
                <div class="student-request-content">
                    ${request.type === 'Appointment' ? `
                        <p><strong>Date:</strong> ${request.date}</p>
                        <p><strong>Time:</strong> ${request.time}</p>
                        <p><strong>Purpose:</strong> ${request.details}</p>
                    ` : `
                        <p><strong>Item:</strong> ${request.item}</p>
                        <p><strong>Quantity:</strong> ${request.quantity}</p>
                        <p><strong>Return Date:</strong> ${request.return_date}</p>
                    `}
                    <p><strong>Notes:</strong> ${request.notes}</p>
                    <p class="student-request-date">Requested on: ${new Date(request.created_at).toLocaleDateString()}</p>
                </div>

                ${request.status === 'Pending' ? `
                    <div class="student-request-actions">
                        <button onclick="approveRequest('${request.type}', ${request.id})" class="approve-btn">
                            Approve
                        </button>
                        <button onclick="denyRequest('${request.type}', ${request.id})" class="deny-btn">
                            Deny
                        </button>
                    </div>
                ` : ''}
            </div>
        `).join('');
    }

    function cancelRequest(type, id) {
        if (confirm(`Are you sure you want to cancel this ${type.toLowerCase()} request?`)) {
            // In a real application, this would make an API call
            console.log(`Cancelling ${type} request:`, id);
            loadRequests(); // Reload the requests
        }
    }

    // Call loadRequests when the page loads
    document.addEventListener('DOMContentLoaded', loadRequests);
    </script>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAddUserModal()">&times;</span>
            <h2>Add New User</h2>
            <form id="addUserForm">
                <label for="userName">Name:</label>
                <input type="text" id="userName" name="userName" required>
                
                <label for="userRole">Role:</label>
                <select id="userRole" name="userRole" required>
                    <option value="Student">Student</option>
                    <option value="Nurse">Nurse</option>
                    <option value="Doctor">Doctor</option>
                </select>
                
                <label for="userEmail">Email:</label>
                <input type="email" id="userEmail" name="userEmail" required>

                <label for="userPassword">Password:</label>
                <input type="password" id="userPassword" name="userPassword" required>
                
                <button type="submit">Add User</button>
            </form>
        </div>
    </div>

    <script>
        function editUser(userId) {
            const userName = prompt("Enter new name for the user:");
            if (userName) {
                // Update user logic here
                console.log(`User ${userId} updated with new name: ${userName}`);
            }
        }

        function deleteUser(userId) {
            if (confirm("Are you sure you want to delete this user?")) {
                // Delete user logic here
                console.log(`User ${userId} deleted`);
            }
        }

        function openAddUserModal() {
            document.getElementById('addUserModal').style.display = 'block';
        }

        function closeAddUserModal() {
            document.getElementById('addUserModal').style.display = 'none';
        }

        document.getElementById('addUserForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Logic to add user
            console.log('User added');
            closeAddUserModal();
        });
    </script>

    <script>
const users = [
    {
        id: "2021-00001",
        name: "Maloi Ricalde",
        role: "Student",
        email: "maloi.ricalde@student.edu",
        status: "active"
    },
    // Add more user objects as needed
];

function toggleUserStatus(userId) {
    const user = users.find(u => u.id === userId);
    if (user) {
        user.status = user.status === "active" ? "inactive" : "active";
        updateUserStatusInUI(userId, user.status);
        console.log(`User ${userId} status changed to ${user.status}`);
    }
}

function updateUserStatusInUI(userId, status) {
    const statusElement = document.querySelector(`span[onclick="toggleUserStatus('${userId}')"]`);
    if (statusElement) {
        statusElement.className = `status-${status}`;
        statusElement.textContent = status.charAt(0).toUpperCase() + status.slice(1);
    }
}
    </script>

    <script>
    function changeUserStatus(userId, newStatus) {
        const user = users.find(u => u.id === userId);
        if (user) {
            user.status = newStatus;
            console.log(`User ${userId} status changed to ${newStatus}`);
        }
    }
    </script>

</body>
</html>