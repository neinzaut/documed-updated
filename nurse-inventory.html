<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory</title>
    <link rel="stylesheet" href="inventory.css">
    <link rel="icon" type="image/x-icon" href="logo_notext.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        
        <div class="nav-logo">
            <img src="logo.png" alt="DocuMed Logo">
        </div>
        <div class="nav-links">
            <!-- Notification Icon -->
            <a href="#" class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
                    <path d="M5 19C4.71667 19 4.47934 18.904 4.288 18.712C4.09667 18.52 4.00067 18.2827 4 18C3.99934 17.7173 4.09534 17.48 4.288 17.288C4.48067 17.096 4.718 17 5 17H6V10C6 8.61667 6.41667 7.38767 7.25 6.313C8.08334 5.23834 9.16667 4.534 10.5 4.2V3.5C10.5 3.08334 10.646 2.72934 10.938 2.438C11.23 2.14667 11.584 2.00067 12 2C12.416 1.99934 12.7703 2.14534 13.063 2.438C13.3557 2.73067 13.5013 3.08467 13.5 3.5V4.2C14.8333 4.53334 15.9167 5.23767 16.75 6.313C17.5833 7.38834 18 8.61734 18 10V17H19C19.2833 17 19.521 17.096 19.713 17.288C19.905 17.48 20.0007 17.7173 20 18C19.9993 18.2827 19.9033 18.5203 19.712 18.713C19.5207 18.9057 19.2833 19.0013 19 19H5ZM12 22C11.45 22 10.9793 21.8043 10.588 21.413C10.1967 21.0217 10.0007 20.5507 10 20H14C14 20.55 13.8043 21.021 13.413 21.413C13.0217 21.805 12.5507 22.0007 12 22Z" fill="#B1B1B1"/>
                    </svg>
            </a>

            <!-- User Icon and Profile Name -->
            <div class="profile-container">
                <div class="profile">
                    <div class="user-icon">
                        <img src="nurse_profile.png" alt="Doctor Profile">
                    </div>
                    <div class="profile-name">
                        <h3>Sarah Kim</h3>
                        <p>Nurse</p>
                    </div>
                </div>

                <!-- Dropdown for Logout -->
                <div class="dropdown">
                    <button class="dropdown-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M6 7L12 13L18 7L20 9L12 17L4 9L6 7Z" fill="black"/>
                        </svg>
                    </button>
                    <div class="dropdown-menu">
                        <a href="nurse-profile.html" class="dropdown-item">My Profile</a>
                        <a href="nurse-login.html" class="dropdown-item">Log out</a>
                    </div>
                </div>
            </div>
            
        </div>
    </nav>


    <nav class="menu" tabindex="0">
        <div class="smartphone-menu-trigger"></div>
        <header class="avatar">
            <img src="nurse_profile.png" />
            <h2>Sarah Kim</h2>
        </header>
        <ul>
            <li tabindex="0" class="icon-dashboard">
                <img src="home-icon.png" alt="Home Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="nurse-dashboard.html"><span>Home</span></a>
            </li>
            <li tabindex="0" class="icon-customers">
                <img src="records-icon.png" alt="Records Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="nurse-records.html"><span>Records</span></a>
            </li>
            <li tabindex="0" class="icon-users">
                <img src="appointment-icon.png" alt="Appointment Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="nurse-appointment.html"><span>Appointment</span></a>
            </li>
            <li tabindex="0" class="icon-users">
                <img src="inventory-icon.png" alt="Inventory Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="nurse-inventory.html"><span>Inventory</span></a>
            </li>
            <!-- <li tabindex="0" class="icon-settings">
                <img src="doctor_profile.png" alt="Logout Icon" style="width:20px; height:20px; margin-right:10px;">
                <span>Log out</span>
            </li> -->
        </ul>
    </nav>
</body>
<div class="main">
    <h1>Inventory</h1>
    <!-- Kanban Board Section -->
    <div class="kanban-board-container">
        <div class="kanban-filter">
            <select class="kanban-filter-dropdown">
                <option value="all">All Items</option>
                <option value="today">Today</option>
                <option value="week">This Week</option>
                <option value="month">This Month</option>
            </select>
        </div>
        <div class="kanban-container">
            <div class="kanban-column">
                <h3 class="column-tag-pending">Pending</h3>
                <div class="kanban-items" id="pending">
                    <div class="kanban-item">
                        <div class="kanban-item-header">
                            <h4>Hot Compress Bag</h4>
                            <button class="status-edit-btn">Edit Status</button>
                        </div>
                        <p>Borrower: Jane Smith</p>
                        <p>Date: Nov 30, 2024 10:30 AM</p>
                    </div>
                    <div class="kanban-item">
                        <div class="kanban-item-header">
                            <h4>Blood Pressure Monitor</h4>
                            <button class="status-edit-btn">Edit Status</button>
                        </div>
                        <p>Borrower: John Doe</p>
                        <p>Date: Nov 29, 2024 2:15 PM</p>
                    </div>
                </div>
            </div>

            <div class="kanban-column">
                <h3 class="column-tag-borrowed">Borrowed</h3>
                <div class="kanban-items" id="borrowed">
                    <div class="kanban-item">
                        <div class="kanban-item-header">
                            <h4>Wheelchair #3</h4>
                            <button class="status-edit-btn">Edit Status</button>
                        </div>
                        <p>Borrower: Mike Johnson</p>
                        <p>Date: Nov 28, 2024 9:00 AM</p>
                    </div>
                    <div class="kanban-item">
                        <div class="kanban-item-header">
                            <h4>Stethoscope</h4>
                            <button class="status-edit-btn">Edit Status</button>
                        </div>
                        <p>Borrower: Dr. Sarah Lee</p>
                        <p>Date: Nov 27, 2024 3:45 PM</p>
                    </div>
                </div>
            </div>

            <div class="kanban-column">
                <h3 class="column-tag-completed">Completed</h3>
                <div class="kanban-items" id="completed">
                    <div class="kanban-item">
                        <div class="kanban-item-header">
                            <h4>Thermometer</h4>
                            <button class="status-edit-btn">Edit Status</button>
                        </div>
                        <p>Borrower: Emily Chen</p>
                        <p>Date: Nov 26, 2024 11:20 AM</p>
                    </div>
                    <div class="kanban-item">
                        <div class="kanban-item-header">
                            <h4>Pulse Oximeter</h4>
                            <button class="status-edit-btn">Edit Status</button>
                        </div>
                        <p>Borrower: Tom Wilson</p>
                        <p>Date: Nov 25, 2024 4:30 PM</p>
                    </div>
                </div>
            </div>

            <div class="kanban-column">
                <h3 class="column-tag-overdue">Overdue</h3>
                <div class="kanban-items" id="overdue">
                    <div class="kanban-item">
                        <div class="kanban-item-header">
                            <h4>Crutches</h4>
                            <button class="status-edit-btn">Edit Status</button>
                        </div>
                        <p>Borrower: Robert Brown</p>
                        <p>Date: Nov 20, 2024 1:00 PM</p>
                    </div>
                    <div class="kanban-item">
                        <div class="kanban-item-header">
                            <h4>Nebulizer</h4>
                            <button class="status-edit-btn">Edit Status</button>
                        </div>
                        <p>Borrower: Lisa Garcia</p>
                        <p>Date: Nov 19, 2024 10:45 AM</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Inventory Table Section -->
    <div class="inventory-section">
        <div class="inventory-header">
            <div class="left-controls">
                <input type="text" placeholder="Search inventory..." class="search-bar">
                <select class="filter-dropdown">
                    <option value="">Filter by Status</option>
                    <option value="available">Available</option>
                    <option value="low">Low Stock</option>
                    <option value="out">Out of Stock</option>
                </select>
            </div>
            <button class="add-button">+ Add Item</button>
        </div>

        <table class="inventory-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Clinic</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>INV001</td>
                    <td>Hot Compress Bag</td>
                    <td>15</td>
                    <td>West Clinic</td>
                    <td><span class="status-available">Available</span></td>
                    <td>
                        <button class="action-btn edit">Edit</button>
                        <button class="action-btn delete">Delete</button>
                    </td>
                </tr>
                <tr>
                    <td>INV002</td>
                    <td>Wheelchair</td>
                    <td>3</td>
                    <td>East Clinic</td>
                    <td><span class="status-low">Low Stock</span></td>
                    <td>
                        <button class="action-btn edit">Edit</button>
                        <button class="action-btn delete">Delete</button>
                    </td>
                </tr>
                <tr>
                    <td>INV003</td>
                    <td>Blood Pressure Monitor</td>
                    <td>0</td>
                    <td>East Clinic</td>
                    <td><span class="status-out">Out of Stock</span></td>
                    <td>
                        <button class="action-btn edit">Edit</button>
                        <button class="action-btn delete">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div id="addItemModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Add New Item</h2>
        <form id="addItemForm">
            <div class="form-group">
                <label for="itemId">ID:</label>
                <input type="text" id="itemId" required>
            </div>
            <div class="form-group">
                <label for="product">Product:</label>
                <input type="text" id="product" required>
            </div>
            <div class="form-group">
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" required>
            </div>
            <div class="form-group">
                <label for="clinic">Clinic:</label>
                <input type="text" id="clinic" required>
            </div>
            <div class="form-group">
                <label for="status">Status:</label>
                <select id="status" required>
                    <option value="available">Available</option>
                    <option value="low">Low Stock</option>
                    <option value="out">Out of Stock</option>
                </select>
            </div>
            <button type="submit" class="submit-btn">Add Item</button>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const kanbanItems = document.querySelectorAll('.kanban-item');
        const kanbanColumns = document.querySelectorAll('.kanban-items');

        kanbanItems.forEach(item => {
            if (!item.id) {
                item.id = 'item-' + Math.random().toString(36).substr(2, 9);
            }
            
            item.addEventListener('dragstart', dragStart);
            item.addEventListener('dragend', dragEnd);
        });

        kanbanColumns.forEach(column => {
            column.addEventListener('dragover', dragOver);
            column.addEventListener('dragenter', dragEnter);
            column.addEventListener('dragleave', dragLeave);
            column.addEventListener('drop', drop);
        });

        function dragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.id);
            e.target.classList.add('dragging');
        }

        function dragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function dragOver(e) {
            e.preventDefault();
        }

        function dragEnter(e) {
            e.preventDefault();
            if (e.target.classList.contains('kanban-items')) {
                e.target.classList.add('drag-over');
            }
        }

        function dragLeave(e) {
            if (e.target.classList.contains('kanban-items')) {
                e.target.classList.remove('drag-over');
            }
        }

        function drop(e) {
            e.preventDefault();
            
            const dropZone = e.target;
            const id = e.dataTransfer.getData('text/plain');
            const draggable = document.getElementById(id);
            dropZone.appendChild(draggable);
            dropZone.classList.remove('drag-over');
        }
    });

    document.addEventListener('DOMContentLoaded', () => {
        const editButtons = document.querySelectorAll('.status-edit-btn');
        
        editButtons.forEach(button => {
            button.addEventListener('click', handleStatusEdit);
        });

        function handleStatusEdit(e) {
            const statusOptions = ['pending', 'borrowed', 'completed', 'overdue'];
            const currentItem = e.target.closest('.kanban-item');
            
            // Get current status based on parent column
            const currentStatus = currentItem.closest('.kanban-items').id;
            
            // Create and show a dropdown menu
            const dropdown = document.createElement('select');
            dropdown.className = 'status-dropdown';
            
            statusOptions.forEach(status => {
                const option = document.createElement('option');
                option.value = status;
                option.textContent = status.charAt(0).toUpperCase() + status.slice(1);
                // Set the current status as selected
                if (status === currentStatus) {
                    option.selected = true;
                }
                dropdown.appendChild(option);
            });

            // Replace the button with the dropdown temporarily
            const button = e.target;
            button.parentNode.replaceChild(dropdown, button);

            // Handle the selection
            dropdown.focus();
            dropdown.addEventListener('change', () => {
                const selectedStatus = dropdown.value;
                const targetColumn = document.getElementById(selectedStatus);
                
                if (targetColumn) {
                    if (currentItem.parentNode) {
                        currentItem.parentNode.removeChild(currentItem);
                    }
                    targetColumn.appendChild(currentItem);
                    
                    // Re-add click event listener to the button
                    const newButton = currentItem.querySelector('.status-edit-btn');
                    if (newButton) {
                        newButton.addEventListener('click', handleStatusEdit);
                    }
                }
                
                // Replace dropdown with button again
                dropdown.parentNode.replaceChild(button, dropdown);
            });

            // Also replace dropdown with button when focus is lost
            dropdown.addEventListener('blur', () => {
                setTimeout(() => {
                    if (dropdown.parentNode) {
                        dropdown.parentNode.replaceChild(button, dropdown);
                    }
                }, 200);
            });
        }
    });

    document.addEventListener('DOMContentLoaded', () => {
        const modal = document.getElementById('addItemModal');
        const addButton = document.querySelector('.add-button');
        const closeBtn = document.querySelector('.close');

        // Open modal when Add Item button is clicked
        addButton.addEventListener('click', () => {
            modal.style.display = 'block';
        });

        // Close modal when X is clicked
        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Form submission
        const addItemForm = document.getElementById('addItemForm');
        addItemForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const itemId = document.getElementById('itemId').value;
            const product = document.getElementById('product').value;
            const quantity = document.getElementById('quantity').value;
            const clinic = document.getElementById('clinic').value;
            const status = document.getElementById('status').value;

            // Create new table row
            const tbody = document.querySelector('.inventory-table tbody');
            const newRow = `
                <tr>
                    <td>${itemId}</td>
                    <td>${product}</td>
                    <td>${quantity}</td>
                    <td>${clinic}</td>
                    <td><span class="status-${status.toLowerCase()}">${status}</span></td>
                    <td>
                        <button class="action-btn edit">Edit</button>
                        <button class="action-btn delete">Delete</button>
                    </td>
                </tr>
            `;
            
            tbody.insertAdjacentHTML('beforeend', newRow);
            
            // Reset form and close modal
            e.target.reset();
            modal.style.display = 'none';
        });
    });
</script>

</html>
