<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="icon" type="image/x-icon" href="logo_notext.png">
</head>
<body>
    <nav class="navbar">
        
        <div class="nav-logo">
            <img src="logo.png" alt="DocuMed Logo">
        </div>
        <div class="nav-links">
            <!-- Notification Icon -->
            <a href="#" class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
                    <path d="M5 19C4.71667 19 4.47934 18.904 4.288 18.712C4.09667 18.52 4.00067 18.2827 4 18C3.99934 17.7173 4.09534 17.48 4.288 17.288C4.48067 17.096 4.718 17 5 17H6V10C6 8.61667 6.41667 7.38767 7.25 6.313C8.08334 5.23834 9.16667 4.534 10.5 4.2V3.5C10.5 3.08334 10.646 2.72934 10.938 2.438C11.23 2.14667 11.584 2.00067 12 2C12.416 1.99934 12.7703 2.14534 13.063 2.438C13.3557 2.73067 13.5013 3.08467 13.5 3.5V4.2C14.8333 4.53334 15.9167 5.23767 16.75 6.313C17.5833 7.38834 18 8.61734 18 10V17H19C19.2833 17 19.521 17.096 19.713 17.288C19.905 17.48 20.0007 17.7173 20 18C19.9993 18.2827 19.9033 18.5203 19.712 18.713C19.5207 18.9057 19.2833 19.0013 19 19H5ZM12 22C11.45 22 10.9793 21.8043 10.588 21.413C10.1967 21.0217 10.0007 20.5507 10 20H14C14 20.55 13.8043 21.021 13.413 21.413C13.0217 21.805 12.5507 22.0007 12 22Z" fill="#B1B1B1"/>
                    </svg>
            </a>

            <!-- User Icon and Profile Name -->
            <div class="profile-container">
                <div class="profile">
                    <div class="user-icon">
                        <img src="student_profile.png" alt="Nurse Profile">
                    </div>
                    <div class="profile-name">
                        <h3>Maloi Ricalde</h3>
                        <p>Student</p>
                    </div>
                </div>

                <!-- Dropdown for Logout -->
                <div class="dropdown">
                    <button class="dropdown-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M6 7L12 13L18 7L20 9L12 17L4 9L6 7Z" fill="black"/>
                        </svg>
                    </button>
                    <div class="dropdown-menu">
                        <a href="student-profile.html" class="dropdown-item">My Profile</a>
                        <a href="student-login.html" class="dropdown-item">Log out</a>
                    </div>
                </div>
            </div>
            
        </div>
    </nav>


    <nav class="menu" tabindex="0">
        <div class="smartphone-menu-trigger"></div>
        <header class="avatar">
            <img src="student_profile.png" />
            <h2>Maloi Ricalde</h2>
        </header>
        <ul>
            <li tabindex="0" class="icon-dashboard">
                <img src="home-icon.png" alt="Home Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="student-dashboard.html"><span>Home</span></a>
            </li>
            <li tabindex="0" class="icon-customers">
                <img src="records-icon.png" alt="Records Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="student-records.html"><span>Records</span></a>
            </li>
            <li tabindex="0" class="icon-users">
                <img src="appointment-icon.png" alt="Appointment Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="student-appointment.html"><span>Appointment</span></a>
            </li>
            <li tabindex="0" class="icon-users">
                <img src="inventory-icon.png" alt="Inventory Icon" style="width:20px; height:20px; margin-right:10px;">
                <a href="student-inventory.html"><span>Request</span></a>
            </li>
            <!-- <li tabindex="0" class="icon-settings">
                <img src="doctor_profile.png" alt="Logout Icon" style="width:20px; height:20px; margin-right:10px;">
                <span>Log out</span>
            </li> -->
        </ul>
    </nav>


    <div class="main">  
        <div class="dashboard-content">
            <div class="banner">
                <p><script>document.write(new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }));</script></p>
                <h1>Hello, Maloi!</h1>
                <img src="student-banner.png" alt="Banner" style="right: 15px;">
            </div>
            <div class="patient-statistics">
                <h2>Request Statistics</h2>
                <div class="statistics-cards">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#FF9800" stroke-width="2"/>
                                <path d="M12 6V12L16 14" stroke="#FF9800" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <h3>Pending Appointments</h3>
                        <p class="stat-number">12</p>
                        <p class="stat-label">Awaiting confirmation</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H21C21.5523 19 22 18.5523 22 18V6C22 5.44772 21.5523 5 21 5Z" stroke="#4CAF50" stroke-width="2"/>
                                <path d="M16 12H8" stroke="#4CAF50" stroke-width="2" stroke-linecap="round"/>
                                <path d="M12 8V16" stroke="#4CAF50" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <h3>Pending Borrow Requests</h3>
                        <p class="stat-number">5</p>
                        <p class="stat-label">Need approval</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#F44336" stroke-width="2"/>
                                <path d="M12 6V12" stroke="#F44336" stroke-width="2" stroke-linecap="round"/>
                                <path d="M12 16V16.5" stroke="#F44336" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <h3>Overdue Borrow Requests</h3>
                        <p class="stat-number">3</p>
                        <p class="stat-label">Past due date</p>
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="header-container">
                    <h2>Medical Records</h2>
                    <a href="student-records.html" class="view-all-button">View all</a>
                </div>
                <table class="records-table">
                    <thead>
                        <tr>
                            <th>Record Details</th>
                            <th>Date Posted</th>
                            <th>Clinic</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Medical Certificate - PE Class</td>
                            <td>March 20, 2024</td>
                            <td>East Clinic</td>
                            <td class="action-buttons">
                                <button onclick="viewRecord(1)" class="view-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" fill="currentColor"/>
                                    </svg>
                                    View
                                </button>
                                <button onclick="downloadRecord(1)" class="download-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="currentColor"/>
                                    </svg>
                                    Download
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>Annual Physical Examination Results</td>
                            <td>March 15, 2024</td>
                            <td>West Clinic</td>
                            <td class="action-buttons">
                                <button onclick="viewRecord(2)" class="view-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" fill="currentColor"/>
                                    </svg>
                                    View
                                </button>
                                <button onclick="downloadRecord(2)" class="download-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="currentColor"/>
                                    </svg>
                                    Download
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>Consultation Record - Fever</td>
                            <td>March 10, 2024</td>
                            <td>East Clinic</td>
                            <td class="action-buttons">
                                <button onclick="viewRecord(3)" class="view-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" fill="currentColor"/>
                                    </svg>
                                    View
                                </button>
                                <button onclick="downloadRecord(3)" class="download-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="currentColor"/>
                                    </svg>
                                    Download
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="dashboard-sidebar">
            <div class="appointment-list">
                <div class="header-container">
                    <h2>Appointments</h2>
                    <a href="student-appointment.html" class="view-all-button">View all</a>
                </div>
                <div class="calendar-widget">
                    <h3>Week View</h3>
                    <div class="week-calendar">
                        <div class="calendar-header">
                            <div>Mon</div>
                            <div>Tue</div>
                            <div>Wed</div>
                            <div>Thu</div>
                            <div>Fri</div>
                            <div>Sat</div>
                            <div>Sun</div>
                        </div>
                        <div class="calendar-body" id="calendar-body">
                            <!-- Days will be populated by JavaScript -->
                        </div>
                    </div>

                <div class="daily-tasks">
                    <h3>Today's Schedule</h3>
                    <ul class="task-list" id="task-list">
                        <!-- Tasks will be populated by JavaScript -->
                    </ul>
                </div>
            </div>
                <script>
                    // Sample appointments data - in real app this would come from backend
                    const appointments = {
                        '2024-11-25': [
                            { time: '09:00', patient: 'Sarah Johnson', type: 'Annual checkup' },
                            { time: '11:30', patient: 'Mike Peters', type: 'Follow-up' }
                        ],
                        '2024-11-28': [
                            { time: '10:00', patient: 'John Doe', type: 'Consultation' },
                            { time: '14:15', patient: 'Tommy Smith', type: 'Vaccination' }
                        ],
                        '2024-11-29': [
                            { time: '13:00', patient: 'Emily Brown', type: 'Initial Visit' },
                            { time: '16:30', patient: 'Alice Cooper', type: 'Follow-up' }
                        ]
                    };

                    function getWeekDates(date) {
                        const curr = date || new Date();
                        const week = [];
                        
                        // Starting from Monday
                        curr.setDate(curr.getDate() - curr.getDay() + 1);
                        
                        for (let i = 0; i < 7; i++) {
                            week.push(new Date(curr));
                            curr.setDate(curr.getDate() + 1);
                        }
                        
                        return week;
                    }

                    function formatDate(date) {
                        return date.toISOString().split('T')[0];
                    }

                    function updateCalendar() {
                        const calendarBody = document.getElementById('calendar-body');
                        calendarBody.innerHTML = '';
                        
                        const today = new Date();
                        const weekDates = getWeekDates(today);
                        
                        weekDates.forEach(date => {
                            const dayDiv = document.createElement('div');
                            dayDiv.className = 'calendar-day';
                            if (date.getDate() === today.getDate() && 
                                date.getMonth() === today.getMonth() && 
                                date.getFullYear() === today.getFullYear()) {
                                dayDiv.classList.add('active');
                            }
                            
                            dayDiv.textContent = date.getDate();
                            dayDiv.setAttribute('data-date', formatDate(date));
                            
                            dayDiv.addEventListener('click', () => showAppointments(formatDate(date)));
                            
                            calendarBody.appendChild(dayDiv);
                        });

                        // Show today's appointments by default
                        showAppointments(formatDate(today));
                    }

                    function showAppointments(dateStr) {
                        const taskList = document.getElementById('task-list');
                        taskList.innerHTML = '';
                        
                        // Update active state in calendar
                        document.querySelectorAll('.calendar-day').forEach(day => {
                            day.classList.remove('active');
                            if (day.getAttribute('data-date') === dateStr) {
                                day.classList.add('active');
                            }
                        });

                        const dayAppointments = appointments[dateStr] || [];
                        
                        if (dayAppointments.length === 0) {
                            const li = document.createElement('li');
                            li.innerHTML = '<span class="task">No appointments scheduled</span>';
                            taskList.appendChild(li);
                            return;
                        }

                        dayAppointments.forEach(apt => {
                            const li = document.createElement('li');
                            li.innerHTML = `
                                <span class="time">${apt.time}</span>
                                <span class="task">${apt.type} - ${apt.patient}</span>
                            `;
                            taskList.appendChild(li);
                        });
                    }

                    // Initialize calendar when page loads
                    document.addEventListener('DOMContentLoaded', updateCalendar);
                </script>

            </div>

            <div class="student-inventory-list">
                <div class="header-container">
                    <h2>My Requests</h2>
                </div>
                <div class="student-request-container" id="requestsContainer">
                    <!-- Request cards will be loaded here -->
                </div>
            </div>
        </div>
    </div>
    <script>
        function editRecord(button) {
            const row = button.parentNode.parentNode;
            const cells = row.getElementsByTagName('td');
            const name = cells[0].innerText;
            const age = cells[1].innerText;
            const diagnosis = cells[2].innerText;
            const notes = cells[3].innerText;
            // Implement edit functionality here
            alert(`Editing record for ${name}`);
        }

        function addNote(button) {
            const row = button.parentNode.parentNode;
            const cells = row.getElementsByTagName('td');
            const name = cells[0].innerText;
            // Implement add note functionality here
            alert(`Adding note for ${name}`);
        }
    </script>
    <script>
    // Function to load appointments
    function loadAppointments() {
        const appointmentsGrid = document.getElementById('appointmentsGrid');
        
        // Dummy data for testing - Student appointments
        const appointments = [
            {
                id: 1,
                student_name: "Maloi Ricalde",
                student_id: "2021-00123",
                clinic: "East Clinic",
                appointment_date: "2024-03-25",
                appointment_time: "09:00",
                type_of_visit: "Medical Certificate Request",
                status: "Pending",
                reason: "Need medical certificate for PE class"
            },
            {
                id: 2,
                student_name: "Maloi Ricalde",
                student_id: "2021-00123",
                clinic: "West Clinic",
                appointment_date: "2024-03-28",
                appointment_time: "10:00",
                type_of_visit: "Consultation",
                status: "Confirmed",
                reason: "Check-up"
            }
        ];

        // Populate the appointments grid with data
        appointments.forEach(appointment => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${appointment.id}</td>
                <td>${appointment.student_name}</td>
                <td>${appointment.student_id}</td>
                <td>${appointment.clinic}</td>
                <td>${appointment.appointment_date}</td>
                <td>${appointment.appointment_time}</td>
                <td>${appointment.type_of_visit}</td>
                <td>${appointment.status}</td>
                <td>${appointment.reason}</td>
            `;
            appointmentsGrid.appendChild(row);
        });
    }

    // Call the function to load appointments when the page loads
    document.addEventListener('DOMContentLoaded', loadAppointments);
    </script>
    <script>
    function loadRequests() {
        const requestsContainer = document.getElementById('requestsContainer');
        
        // Dummy data for testing - Combined requests (appointments and borrowing)
        const requests = [
            {
                id: 1,
                type: "Appointment",
                date: "2024-03-25",
                time: "09:00",
                status: "Pending",
                details: "Medical Certificate Request",
                notes: "Need medical certificate for PE class",
                created_at: "2024-03-20"
            },
            {
                id: 2,
                type: "Borrow",
                item: "Thermometer",
                quantity: 1,
                status: "Pending",
                return_date: "2024-03-26",
                notes: "For monitoring temperature",
                created_at: "2024-03-21"
            },
            {
                id: 3,
                type: "Borrow",
                item: "First Aid Kit",
                quantity: 1,
                status: "Approved",
                return_date: "2024-03-27",
                notes: "For sports event",
                created_at: "2024-03-19"
            }
        ];

        requestsContainer.innerHTML = requests.map(request => `
            <div class="student-request-card ${request.status.toLowerCase()}">
                <div class="student-request-header">
                    <span class="student-request-type ${request.type.toLowerCase()}">${request.type}</span>
                    <span class="status-badge ${request.status.toLowerCase()}">${request.status}</span>
                </div>
                
                <div class="student-request-content">
                    ${request.type === 'Appointment' ? `
                        <p><strong>Date:</strong> ${request.date}</p>
                        <p><strong>Time:</strong> ${request.time}</p>
                        <p><strong>Purpose:</strong> ${request.details}</p>
                    ` : `
                        <p><strong>Item:</strong> ${request.item}</p>
                        <p><strong>Quantity:</strong> ${request.quantity}</p>
                        <p><strong>Return Date:</strong> ${request.return_date}</p>
                    `}
                    <p><strong>Notes:</strong> ${request.notes}</p>
                    <p class="student-request-date">Requested on: ${new Date(request.created_at).toLocaleDateString()}</p>
                </div>

                ${request.status === 'Pending' ? `
                    <div class="student-request-actions">
                        <button onclick="cancelRequest('${request.type}', ${request.id})" class="cancel-btn">
                            Cancel Request
                        </button>
                    </div>
                ` : ''}
            </div>
        `).join('');
    }

    function cancelRequest(type, id) {
        if (confirm(`Are you sure you want to cancel this ${type.toLowerCase()} request?`)) {
            // In a real application, this would make an API call
            console.log(`Cancelling ${type} request:`, id);
            loadRequests(); // Reload the requests
        }
    }

    // Call loadRequests when the page loads
    document.addEventListener('DOMContentLoaded', loadRequests);
    </script>

</body>
</html>